#!/usr/bin/env ruby
require "libusb"
require "logger"

$: << "./lib"
require "printer"

class CLIController
  def initialize(printer, logger)
    @printer, @logger = printer, logger
  end

  def init    
    @printer.init_printer
  end

  def run(argv)
    init
  end
end

logger = Logger.new($stdout)
logger.formatter = proc do |severity, datetime, progname, msg|
  "#{severity}: #{msg}\n"
end

exit(1) unless printer = Printer.setup(logger)

CLIController.new(printer, logger).run(ARGV)
logger.info "Done"